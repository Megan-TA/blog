---
title: 掉坑记录
catalog: true
date: 2019-08-28 09:57:42
subtitle:
header-img:
tags:
---

1. fetch 的 mode 设置 no-cors 返回的 response 永远都是无效信息

---

### UI

1. `element-ui`的 dialog 组件中存在多个 select 组件，其中一个 select 组件的切换影响另一个 selct 的 options，此时会出现另一个的 select 的值选中之后并不会在 UI 层显示，必须使用 vue 提供的`$forceUpdate`方法强制更新；

2. `element-ui`的走马灯`item`接受数据，要是数据源有变化，会触发重新更新数据源的操作，丢弃当前索引，导致一些特定场景（比如：实时给走马灯添加新数据展示）需要保留索引出问题；

3. `element-ui`的走马灯不断鼠标 hover 的时候，会导致没有完全清除掉定时器，导致瞬间滑动的问题；

4. `element-ui`的走马灯`trigger`方式默认`hover`，有时鼠标从下往上或者反方向滑动会导致索引值不知道偏移到哪里，导致出问题；

---

### linux

1. 后端接口并没有统一提供路径给前端做反向代理，在前端项目请求后端接口时候统一加了`/api/`路径给`nginx`转发，在 nginx 那一层需要对新加的`/api/`路径的接口，去掉`/api/`路径，再将请求转发到指定目标服务。

```nginx
location ~ /api/ {
    rewrite /api/(.*)$ /$1 break;

    proxy_pass  http://www.baidu.com;
}
```

### UI 框架

1. vue 动态更改 data 的数据必须要用`$set`方法设置，否则可能无法响应式，出现场景：表单下拉选中切换展示不同的表单，会出现表单无法输入值来响应。

2. 编辑页面场景，父组件先获取详情接口，然后取到值通过 props 传递值给子组件（比如下拉组件），子组件本身也有调用接口获取下拉数据，就导致 props 传递的值的顺序和本身接口响应拿到值的顺序不可控。为了解决这个问题，在 vue 下通过 v-if 控制子组件的渲染，只有父组件接口取到值了才渲染子组件，可以完美解决 props 传值和接口获取值的顺序不可控。但又会带来下面几个缺点：

- 子组件本身封装不彻底
- 父组件接口响应慢或者失败导致子组件有明显显示延迟或者不显示

### npm

1. 本地改完代码，直接发包，本地代码未推送；
2. 多个包在各自分支维护发布，导致不能在一个分支找到所有最新代码；
