---
title: 动态换肤
catalog: true
date: 2020-06-12 18:19:58
subtitle:
header-img:
tags: javascript
---

## 背景

说起前端换肤，一般分为两种：

1. 一种是几种可供选择的颜色/主题样式，进行选择切换，这种可供选择的主题切换不会很多，适合绝大多数项目实际情况；
2. 另一种是需要自定义色值，或者通过取色板取色，可供选择的范围就很大了，参考Element-ui主题色定义；

我们具体讲一讲第一种情况，这也是适合绝大多数项目实际情况，比较有代表性。第二种实现可以参考Element-ui实现思路

## 如何实现

一般是通过控制给全局加一个样式，通过这个顶级样式去覆盖具体类的颜色；

这种方式使用和维护起来就很麻烦，并且很容易遗漏样式覆盖，并不是很推荐。

通过js控制改变加载不同主题色的link文件

这种实现对于，颜色和主题多了的时候，维护起来就很麻烦，需要同时维护 n 个样式文件，并且使用JS改变href属性会带来加载延迟，样式切换不流畅，体验也不好。

目前在不考虑兼容IE低版本的情况下，比较推荐的通用方案是使用CSS变量

![CSS Variables](https://s1.ax1x.com/2020/06/12/tXFaxH.png)

[点这里查看更详细兼容性](https://caniuse.com/#search=CSS%20Variables)

可见目前主流移动端浏览器支持率还是不错的，而且操作起来够简便。

用法举例

定义全局变量

```css
body {
    --color-ff: red;
    --color-f7: blue;
}
```

使用 第二个参数可以设置默认颜色

```css
.color_test {
    color: var(--color-ff, #fff);
    background: var(--color-f7, blue);
}
```

修改

```javascript
document.body.style.setProperty('--color-ff', '#ff0000');
document.body.style.setProperty('--color-f7', '#ff0000');
```

参考资料：

1. [关于 CSS 变量，你需要了解的一切](https://juejin.im/post/5ab835225188255572085af4)
2. [CODE PEN全局背景色替换](https://codepen.io/ohansemmanuel/pen/xYKgwE)
